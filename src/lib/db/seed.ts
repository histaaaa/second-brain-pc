import type { CategoryId } from "@/lib/categories";
import type { StardustRecord, ProjectRecord, CrystalRecord } from "./types";
import { db } from "./schema";
import {
  seedProjects,
  seedStardust,
  seedEntryProjects,
  createCrystal,
} from "./service";

const PROJECT_NAMES = [
  "第二大脑项目",
  "投影仪ID项目",
  "过年广东出游",
  "新公司装修项目",
];

function uuid(): string {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
    const r = (Math.random() * 16) | 0;
    const v = c === "x" ? r : (r & 0x3) | 0x8;
    return v.toString(16);
  });
}

function pick<T>(arr: T[]): T {
  return arr[Math.floor(Math.random() * arr.length)];
}

function pickMany<T>(arr: T[], min: number, max: number): T[] {
  const count = min + Math.floor(Math.random() * (max - min + 1));
  const shuffled = [...arr].sort(() => Math.random() - 0.5);
  return shuffled.slice(0, Math.min(count, shuffled.length));
}

function randomDateMs(yearBack: number): number {
  const now = Date.now();
  const past = now - yearBack * 365 * 24 * 60 * 60 * 1000;
  return Math.floor(past + Math.random() * (now - past));
}

// ============================================
// 800+ 条真实星尘数据（按 7 分类）
// ============================================
const STARDUST_DATA: Record<CategoryId, string[]> = {
  LEARNING: [
    // 学习成长类 0-119
    "早上6点起床跑步5公里，开启元气满满的一天",
    "读完《认知觉醒》第三章，关于元认知的概念很有启发",
    "背了50个英语单词，用的是Anki记忆曲线软件",
    "学习Python数据分析视频课程，完成第15课",
    "听完得到APP上《香帅的金融学课》本周更新",
    "阅读《刻意练习》1小时，笔记记录在Notion",
    "练习吉他1小时，今天主要练了F和弦转换",
    "冥想15分钟，专注力比上周有进步",
    "学习钢琴拜厄教程第32条，速度提到80拍",
    "读完《穷查理宝典》关于多元思维模型的内容",
    "看了一篇关于ChatGPT的技术文章，收获很大",
    "学习TypeScript泛型部分，做了3道练习题",
    "读完《思考快与慢》第一部分，峰终定律有意思",
    "背完新概念英语第三册第20课课文",
    "练习硬笔书法半小时，控笔更稳了",
    "学习剪辑视频，Pr软件基础功能基本掌握",
    "读完《心流》这本书，关于最优体验的理论",
    "英语听力练习VOA常速新闻30分钟",
    "学习Docker容器技术，部署了第一个容器",
    "读完《高效能人士的七个习惯》前四章",
    "吉他练习攻克了大横按，食指力量不够",
    "学习机器学习吴恩达课程，梯度下降算法",
    "读完《原子习惯》关于习惯养成的四个定律",
    "早上听播客《疯投圈》讲消费投资逻辑",
    "练习素描石膏像静物，画了2小时",
    "学习LeetCode算法题，做了3道中等难度",
    "读完《非暴力沟通》关于表达感受的方法",
    "背诵唐诗宋词各一首，保持文学素养",
    "学习摄影构图法则，三分法对角线法则",
    "读完《深度工作》关于专注力的培养方法",
    "日语学习入门五十音图，差不多记住了",
    "练习演讲15分钟，对着镜子练肢体语言",
    "学习区块链技术原理，看白皮书",
    "读完《反脆弱》从不确定性中获益",
    "背单词100个，用墨墨背单词APP",
    "吉他练了3首歌的solo部分",
    "冥想20分钟，脑海中杂念少了很多",
    "读完《纳瓦尔宝典》关于财富与幸福",
    "学习React Hooks，useEffect用得更顺手",
    "英语口语练习，跟读BBC新闻30分钟",
    "读完《终身成长》关于成长型思维模式",
    "练习尤克里里，学会弹唱《小手拉大手》",
    "学习产品经理课程，用户需求分析部分",
    "读完《人类简史》关于认知革命的内容",
    "跑步10公里，用时58分钟",
    "学习Sketch设计软件，做了几个图标",
    "读完《金字塔原理》关于结构化思维",
    "背了20个德语单词，感觉比英语难",
    "吉他指弹版《天空之城》终于练下来了",
    "冥想1个月了，睡眠质量确实有改善",
    "读完《原则》关于生活和工作原则",
    "学习iOS开发，Swift基础语法",
    "练字半小时，楷书结构更规范了",
    "读完《自控力》关于意志力的科学",
    "英语阅读《经济学人》文章2篇",
    "学习滑雪，单板推坡勉强会了",
    "读完《社会心理学》关于从众效应",
    "吉他换了套弦，音色亮了很多",
    "冥想时发现注意力越来越容易集中",
    "读完《思考的艺术》关于批判性思维",
    "学习钢琴599练习曲第15条",
    "背单词改成早上7点，效率更高",
    "读完《学习之道》关于刻意练习",
    "吉他演出第一次，紧张得手抖",
    "冥想APP升级到年度会员了",
    "读完《精进》关于如何成为一个厉害的人",
    "学习摄影后期LR调色教程",
    "英语CET-6单词背完一轮了",
    "吉他即兴伴奏能力提升了一些",
    "读完《少有人走的路》关于自律",
    "冥想时能进入心流状态了",
    "学习街舞Popping基础动作",
    "读完《活出生命的意义》意义疗法",
    "跑步改成隔天一次，保护膝盖",
    "吉他弹唱终于能边弹边唱了",
    "冥想APP连续打卡30天",
    "读完《认知红利》关于注意力经济",
    "学习书法篆书，知道了什么是铁线篆",
    "英语口语跟读TED演讲10篇",
    "读完《刻意练习》做了详细笔记",
    "吉他学会了用拨片演奏",
    "冥想已成为每天的习惯",
    "读完《番茄工作法图解》时间管理",
    "学习Python爬虫，爬取豆瓣电影Top250",
    "英语阅读速度提升明显",
    "吉他弹唱《平凡之路》完整版",
    "读完《非暴力沟通》并在生活中实践",
    "冥想时呼吸控制更稳定了",
    "学习游泳，终于敢把头埋进水里",
    "读完《好好说话》沟通技巧",
    "吉他学会了大横按Bm和弦",
    "冥想时身体扫描练习",
    "读完《微习惯》关于习惯养成",
    "学习吉他指弹押尾桑《风之诗》",
    "英语听力从VOA常速升到BBC",
    "读完《亲密关系》关于爱情心理学",
    "冥想时能控制走神的次数了",
    "学习钢琴梦中的婚礼简化版",
    "英语六级真题做了3套",
    "吉他弹唱进阶，能自己编配和弦",
    "冥想APP推荐给朋友了",
    "读完《习惯的力量》习惯回路",
    "学习书法创作，写了第一幅作品",
    "英语写作练习，写了2篇小作文",
    "吉他准备考级，开始练考级曲目",
    "冥想后写日记反思已成流程",
    "读完《当下的力量》临在概念",
    "学习摄影，拍了一套人像写真",
    "英语流利说打卡30天",
    "吉他表演获得好评",
    "冥想后精力更充沛",
  ],
  RELATIONSHIPS: [
    // 家庭生活类 120-239
    "周末陪爸妈去杭州西湖玩了两天",
    "妈妈的生日，在外滩附近订了餐厅",
    "和老婆结婚纪念日，在家做西餐",
    "带奶奶去医院复查骨密度，指标正常",
    "全家大扫除，把阳台彻底整理了",
    "宝宝的第一次叫爸爸，激动坏了",
    "陪爸爸看世界杯决赛直播",
    "教外婆用智能手机视频通话",
    "家庭会议讨论明年春节旅行计划",
    "姐姐生了个大胖小子，去医院看望",
    "全家去崇明岛度周末，农家乐",
    "爸爸的腰疼好了，带他去理疗",
    "和老婆一起组装宜家书架",
    "宝宝的百日宴，来了很多亲戚",
    "妈妈教我做红烧肉，味道很正宗",
    "陪爷爷下象棋，赢了两局",
    "全家福拍摄完成，很温馨",
    "带爸妈去体检，一切正常",
    "老婆怀孕了，开始补叶酸",
    "外婆寄来的腊肉收到了",
    "家庭厨房改造，换了新油烟机",
    "陪儿子搭乐高城堡",
    "爸爸戒烟成功了，奖励他一部新手机",
    "全家去泡温泉放松一下",
    "宝宝的第一次学走路",
    "妈妈来上海帮忙带孩子",
    "和姐姐视频聊天半小时",
    "全家去野生动物园玩",
    "爷爷的生日，全家去饭店庆祝",
    "陪爸爸钓鱼，空军但很开心",
    "老婆产后恢复不错",
    "家庭预算会议，定了月度开支",
    "宝宝的第一次坐飞机",
    "带奶奶去复查眼睛，白内障好了",
    "全家去迪士尼，人山人海",
    "爸爸的电脑坏了，我帮他修好",
    "宝宝的第一次叫妈妈",
    "妈妈教我做饺子，韭菜鸡蛋馅",
    "陪爷爷浇花聊天",
    "全家去苏州园林一日游",
    "姐姐的孩子满月了",
    "宝宝的牙齿长出来了",
    "带爸爸去配老花镜",
    "全家露营，第一次搭帐篷",
    "老婆的生日，准备惊喜派对",
    "外婆的腿脚不便，买了个轮椅",
    "宝宝的第一次爬行比赛",
    "陪妈妈逛商场买衣服",
    "爸爸的血压稳定了",
    "全家去长隆野生动物世界",
    "宝宝的第一次叫爷爷奶奶",
    "家庭读书会，读《我们仨》",
    "带奶奶去公园晒太阳",
    "全家去杭州灵隐寺祈福",
    "宝宝的第一次走路",
    "陪爸爸打羽毛球",
    "妈妈更年期情绪不稳定，多陪伴",
    "全家去北京旅游一周",
    "宝宝的第一次上幼儿园",
    "外婆的生日，手写贺卡",
    "陪爷爷下围棋，输了",
    "全家去看灯光秀",
    "宝宝的第一次自己吃饭",
    "带爸爸做胃镜检查",
    "家庭电影之夜",
    "姐姐离婚了，多关心她",
    "全家去云南旅行",
    "宝宝的第一次涂鸦",
    "陪妈妈跳广场舞",
    "爸爸的糖尿病控制住了",
    "全家去采摘草莓",
    "宝宝的第一次说话",
    "带奶奶去医院看皮肤过敏",
    "家庭聚会，舅舅一家也来了",
    "宝宝的第一次剪头发",
    "陪爸爸看京剧",
    "妈妈的广场舞比赛，我们去助威",
    "全家去杭州千岛湖",
    "宝宝的第一次坐火车",
    "外婆寄来的棉袄很暖",
    "陪爷爷练太极拳",
    "全家去三亚过年",
    "宝宝的第一次吹蜡烛",
    "带爸爸去听相声",
    "家庭瑜伽时间",
    "姐姐找到新工作了",
    "全家去西安看兵马俑",
    "宝宝的第一次游泳",
    "陪奶奶聊天，听她讲过去的事",
    "爸爸的背不疼了",
    "全家去成都吃火锅",
    "宝宝的第一次画画",
    "带妈妈做头发",
    "家庭烘焙日，做蛋糕",
    "宝宝的第一次翻跟头",
    "陪外婆包粽子",
    "全家去庐山避暑",
    "宝宝的第一次自己穿衣",
    "带奶奶逛超市",
    "家庭桌游夜",
    "宝宝的第一次自己喝水",
    "陪爸爸钓鱼收获不错",
    "妈妈的项链断了，去修",
    "全家去内蒙古骑马",
    "宝宝的第一次荡秋千",
    "带爷爷去钓鱼",
    "家庭K歌时间",
    "宝宝的第一次坐旋转木马",
    "陪外婆散步",
    "爸爸的关节炎好多了",
    // 社交人际类 480-599 (合并到关系)
    "大学室友聚会，毕业后首次齐聚",
    "和老李约咖啡，聊起创业想法",
    "Joe推荐的那本书下单了",
    "行业交流会上加了10个同行微信",
    "参加线下读书会，分享《认知觉醒》",
    "团建活动去了崇明岛，氛围很好",
    "帮前同事介绍了一份工作",
    "和导师约了周末吃饭",
    "LinkedIn收到猎头消息",
    "参加朋友婚礼，当伴郎",
    "和发小视频聊天半小时",
    "线下Meetup分享技术经验",
    "老朋友来上海，请他吃本帮菜",
    "加入跑团，周末一起跑步",
    "和，产品经理coffee chat",
    "参加读书会《非暴力沟通》",
    "帮大学室友解答职业困惑",
    "在技术社群回答新人问题",
    "参加行业沙龙，讲了20分钟",
    "和邻居关系好了，借了酱油",
    "社交恐惧症又犯了，拒绝聚会",
    "加了个羽毛球群，约着打球",
    "高中同学群突然活跃起来",
    "给多年未联系的朋友发了祝福",
    "参加相亲活动，没看中",
    "和死党组队打游戏",
    "在社区做志愿者",
    "和老领导保持联系",
    "和瑜伽课同学成了朋友",
    "参加插花活动认识了几个女生",
    "帮同事介绍对象",
    "在论坛回复帖子被点赞",
    "社交媒体上收到陌生人的鼓励",
    "和客户保持良好关系",
    "参加线下英语角",
    "老朋友借钱，借还是不借",
    "和室友关系有点紧张",
    "家族群里抢红包手气最好",
    "参加校友会活动",
    "和前女友分手后首次联系",
    "在B站评论区认识了朋友",
    "和邻居一起收快递",
    "参加摄影群外拍活动",
    "和知乎上认识的人线下见面",
    "老同学结婚随了份子钱",
    "帮朋友搬家累瘫了",
    "和咖啡馆常客成了朋友",
    "参加同城活动认识新朋友",
    "和远房亲戚断联了",
    "和室友一起养猫",
    "在Discord社区活跃",
    "和网友面基成功",
    "参加徒步群活动",
    "老朋友介绍的客户成交了",
    "和邻居一起去买菜",
    "参加生日派对",
    "和以前同事保持联系",
    "帮邻居代收快递",
    "在兴趣小组交到志同道合的朋友",
    "和健身房的伙伴互相鼓励",
    "参加社区组织的活动",
    "和高中好友重聚",
    "帮朋友介绍工作机会",
    "在豆瓣小组找到同好",
    "和网友一起追剧讨论剧情",
    "参加线下游戏店聚会",
    "和老乡会的人聚餐",
    "和同事下班后去喝酒",
    "帮朋友解答感情问题",
    "在Twitter上关注了行业大V",
    "和球友约周末打球",
    "参加志愿者活动",
    "和大学导师保持联系",
    "在微信读书上认识书友",
    "和以前同学重新联系上",
    "帮邻居修好了WiFi",
    "参加公司年会认识新人",
    "和死党一起去旅行",
    "在社区群里帮忙解答问题",
    "和瑜伽老师成了朋友",
    "参加线下编程马拉松",
    "和多年未见的老朋友见面",
    "帮同事介绍相亲对象",
    "在B站up主评论区认识朋友",
    "和跑步群的小伙伴一起训练",
    "参加读书会分享读书心得",
    "和咖啡店老板熟络起来",
    "在技术社区回答问题获得感谢",
    "和邻居一起参加社区活动",
    "参加朋友组织的狼人杀",
    "和知乎网友线下见面",
    "帮老同学介绍客户",
    "和一起学车的同学保持联系",
    "参加同城交友活动",
    "和以前邻居保持联系",
  ],
  WORK: [
    // 职业发展类 240-359
    "第二大脑项目完成星云视图原型",
    "投影仪ID项目与硬件组对齐规格",
    "新公司装修完成水电验收",
    "产品评审会提出优化建议",
    "晨会同步进度，API对接完成80%",
    "与UI设计师1对1讨论动效方案",
    "周会汇报，本周完成12个需求",
    "技术分享会讲React Fiber原理",
    "代码review提出5条优化建议",
    "解决线上bug：搜索延迟高",
    "与产品经理讨论需求优先级",
    "参加公司组织的AI培训",
    "年度绩效自评完成",
    "导师辅导职业规划",
    "优化发布流程，效率提升30%",
    "处理50封邮件",
    "完成技术方案设计文档",
    "面试候选人2位",
    "参加架构评审会",
    "写完项目复盘报告",
    "代码重构，用户模块性能优化",
    "参加黑客马拉松，拿了二等奖",
    "与测试对接提测要点",
    "产品功能上线，用户反馈不错",
    "学习新技术Rust，做Demo",
    "完成季度OKR制定",
    "处理客户投诉电话",
    "团队聚餐，融洽",
    "写完API接口文档",
    "帮同事排查生产问题",
    "参加行业峰会演讲",
    "优化数据库查询，慢SQL减少",
    "部署自动化测试框架",
    "完成代码合并审查",
    "产品需求评审会",
    "参加校招宣讲会",
    "解决内存泄漏问题",
    "代码规范统一，使用ESLint",
    "写完技术周报",
    "与运维对接监控告警",
    "重构老旧代码模块",
    "学习GraphQL新技术",
    "提交代码3次合并请求",
    "参加跨部门协作会议",
    "处理紧急线上事故",
    "完成单元测试覆盖率提升",
    "写完项目技术方案",
    "与UX设计师讨论交互细节",
    "参加晋升答辩",
    "代码优化，首屏加载加快",
    "处理遗留技术债务",
    "写完操作手册文档",
    "参加Bug Bash活动",
    "解决跨域问题",
    "完成灰度发布上线",
    "代码重构，抽象公共组件",
    "参加产品规划会",
    "处理性能优化需求",
    "写完部署文档",
    "与数据团队对接埋点",
    "参加团队建设活动",
    "解决并发问题",
    "完成接口文档更新",
    "参加技术预研项目",
    "优化搜索算法",
    "写完代码审查指南",
    "处理安全漏洞修复",
    "完成代码迁移工作",
    "参加客户拜访",
    "处理需求变更",
    "优化图片加载策略",
    "写完技术分享PPT",
    "与QA讨论测试用例",
    "参加头脑风暴会议",
    "解决兼容性问题",
    "完成模块拆分工作",
    "写完用户指南",
    "参加项目管理培训",
    "处理工单积压",
    "优化错误处理逻辑",
    "参加架构设计评审",
    "完成第三方集成",
    "写完性能测试报告",
    "与客服对接常见问题",
    "参加敏捷回顾会议",
    "解决部署脚本问题",
    "完成监控告警配置",
    "参加行业交流",
    "处理反馈建议",
    "优化日志记录",
    "写完故障复盘报告",
    "完成新员工培训",
    "参加战略规划会",
    "处理升级工单",
    "优化请求响应",
    "参加技术债清理",
    "完成代码规范培训",
    "写完项目进度报告",
  ],
  ENTERTAINMENT: [
    // 休闲娱乐类 360-479
    "周末在家看完电影《奥本海默》",
    "追完《繁花》电视剧，意犹未尽",
    "读完刘慈欣《球状闪电》，科幻震撼",
    "Switch玩《塞尔达》20小时通关",
    "B站看美食视频，学做红烧排骨",
    "kindle读完《长安的荔枝》",
    "Steam促销入手《博德之门3》",
    "看了一场线下脱口秀，笑到肚子疼",
    "读完马伯庸《显微镜下的大明》",
    "刷短视频2小时，有点后悔",
    "追更网文《宿命之环》最新章节",
    "看纪录片《地球脉动》，大自然震撼",
    "读完《活着》，余华写得真好",
    "手游原神完成海灯节活动",
    "看了一场演唱会，张杰的歌真好听",
    "读完《百年孤独》魔幻现实主义",
    "追完《狂飙》电视剧，太上头了",
    "玩《双人成行》和老婆合作通关",
    "读完毛姆《月亮与六便士》",
    "看了一场篮球比赛，湖人赢了",
    "玩《艾尔登法环》，BOSS卡了3天",
    "读完《杀死一只知更鸟》",
    "追完《去有风的地方》电视剧",
    "刷小红书看旅游攻略",
    "读完《追风筝的人》",
    "看了一场话剧《暗恋桃花源》",
    "玩《动物森友会》建岛忙",
    "读完《1984》反乌托邦经典",
    "追完《三体》电视剧，震撼",
    "看了一场舞蹈演出",
    "玩《原神》抽卡，歪了",
    "读完《明朝那些事儿》",
    "看了一场电影点映",
    "刷B站学习做菜视频",
    "读完《人类简史》",
    "追完《庆余年》",
    "玩《王者荣耀》上王者了",
    "读完《房思琪的初恋乐园》",
    "看了一场足球比赛",
    "追完《琅琊榜》",
    "玩《光遇》遇见了很好的陌生人",
    "读完《断舍离》开始整理房间",
    "看了一场相声演出",
    "追完《甄嬛传》经典",
    "玩《我的世界》建房子",
    "读完《解忧杂货店》",
    "看了一场音乐会",
    "追完《知否知否》",
    "玩《第五人格》排位上分",
    "读完《天才在左疯子在右》",
    "看了一场芭蕾舞剧",
    "追完《乔家的儿女》",
    "玩《崩坏星穹铁道》过剧情",
    "读完《撒哈拉的故事》",
    "看了一场魔术表演",
    "追完《觉醒年代》",
    "玩《双人成行》通关",
    "读完《沉默的大多数》",
    "看了一场歌剧",
    "追完《白夜追凶》",
    "玩《鬼泣5》动作游戏真爽",
    "读完《围城》钱钟书",
    "看了一场体育比赛",
    "追完《爱回家》TVB",
    "玩《饥荒》生存挑战",
    "读完《瓦尔登湖》",
    "看了一场戏曲演出",
    "追完《老友记》全季",
    "玩《宝可梦朱紫》收集",
    "读完《我们仨》杨绛",
    "看了一场马戏团表演",
    "追完《乡土中国》",
    "玩《2077》夜之城真美",
    "读完《美学散步》宗白华",
    "看了一场舞蹈比赛",
    "追完《金瓶梅》古典名著",
    "玩《霍格沃茨之遗》",
    "读完《万历十五年》",
    "看了一场杂技表演",
    "追完《平凡的世界》",
    "玩《逆转裁判》推理真好玩",
    "读完《全球通史》",
    "看了一场电影首映",
    "追完《盗墓笔记》",
    "玩《戴森球计划》",
    "读完《美的历程》李泽厚",
    "看了一场脱口秀",
    "追完《鬼吹灯》",
    "玩《缺氧》生存游戏",
  ],
  // 旅行类 465-539
  TRAVEL: [
    "计划五一去云南大理旅行",
    "日本签证办好了，行程规划中",
    "三亚亚特兰蒂斯酒店体验",
    "周末去杭州西湖灵隐寺",
    "北京故宫长城历史文化之旅",
    "云南丽江古城束河古镇",
    "西藏拉萨布达拉宫朝圣",
    "成都重庆美食探索之旅",
    "厦门鼓浪屿文艺小清新",
    "青岛啤酒节感受氛围",
    "西安兵马俑古城墙",
    "桂林阳朔山水甲天下",
    "张家界天门山玻璃栈道",
    "贵州黄果树瀑布壮观",
    "西双版纳热带雨林",
    "内蒙古呼伦贝尔大草原",
    "新疆天山喀纳斯湖",
    "敦煌莫高窟丝路历史",
    "青海湖环湖自驾",
    "香港澳门购物美食",
    "泰国曼谷清迈芭提雅",
    "新加坡圣淘沙鱼尾狮",
    "马来西亚吉隆坡双子塔",
    "越南芽庄海滨度假",
    "巴厘岛乌布梯田",
    "马尔代夫水上别墅",
    "迪拜哈利法塔沙漠",
    "欧洲多国游行程",
    "日本樱花季京都大阪",
    "韩国首尔济州岛",
    "澳洲悉尼大堡礁",
    "新西兰皇后镇跳伞",
    "加拿大落基山脉班夫",
    "美国66号公路自驾",
    "纽约时代广场中央公园",
    "伦敦巴黎罗马经典游",
    "冰岛极光追光之旅",
    "北欧四国极光之旅",
    "摩洛哥彩色小镇舍夫沙万",
    "土耳其热气球卡帕多奇亚",
    "尼泊尔徒步ABC线",
    "不丹神秘佛国",
    "斯里兰卡海上小火车",
    "邮轮旅行日韩线路",
    "自驾318川藏线",
    "青海茶卡盐湖天空之镜",
    "贵州肇兴侗寨",
    "福建土楼客家建筑",
    "云南元阳梯田灌水期",
    "江苏周庄水乡",
    "湖南凤凰古城",
    "江西婺源油菜花",
    "安徽宏村写生",
    "河北承德避暑山庄",
    "山西平遥古城",
    "山东泰山登顶",
    "湖北武当山道教圣地",
    "湖南张家界森林公园",
    "周末城市漫步，探索老城区胡同",
    "建筑探访：安藤忠雄美术馆",
    "美食之旅：顺德吃遍米其林",
    "京都宇治抹茶老店朝圣",
    "潮汕牛肉火锅深度体验",
    "景德镇陶瓷工艺探访",
    "苏州园林建筑美学之旅",
    "日本直岛艺术小岛",
    "玻利维亚天空之镜",
    "冰岛黑沙滩摄影",
    "摩洛哥舍夫沙万蓝色小镇",
    "克罗地亚杜布罗夫尼克",
    "葡萄牙里斯本电车漫游",
    "秘鲁马丘比丘印加古道",
    "土耳其棉花堡温泉",
    "纳米比亚死亡谷沙漠",
    "缅甸蒲甘万千佛塔",
    "约旦佩特拉古城",
    "埃及金字塔狮身人面像",
    "希腊圣托里尼日落",
    "新西兰萤火虫洞",
    "澳洲大洋路十二门徒",
    "加拿大班夫国家公园",
    "挪威峡湾游船",
    "芬兰极光玻璃屋",
    "瑞典冰酒店体验",
    "丹麦哥本哈根设计之旅",
    "荷兰风车村",
    "比利时布鲁日运河",
    "德国新天鹅堡",
  ],
  // 设计类 615-689
  DESIGN: [
    "学习Figma组件化设计",
    "研究苹果产品设计语言",
    "学习字体设计基础知识",
    "UI设计规范制定",
    "色彩搭配理论学习",
    "学习网格系统布局",
    "品牌设计视觉识别系统",
    "学习图标设计原则",
    "研究Material Design规范",
    "设计作品集整理",
    "学习动效设计Principle",
    "产品设计用户体验流程",
    "学习素描基础造型",
    "水彩画花卉静物",
    "油画风景写生",
    "学习插画风格分类",
    "扁平化设计风格",
    "极简主义设计美学",
    "包豪斯设计历史",
    "学习3D建模Blender",
    "产品CMF设计研究",
    "工业设计草图绘制",
    "人机工程学尺寸研究",
    "设计调研用户访谈",
    "竞品分析设计策略",
    "Design System搭建",
    "Design Token设计",
    "可访问性设计研究",
    "响应式设计适配",
    "深色模式设计规范",
    "微交互设计细节",
    "动画曲线节奏感",
    "留白呼吸感设计",
    "设计灵感收集Pinterest",
    "Dribbble设计趋势",
    "Behance作品展示",
    "设计提案PPT制作",
    "设计评审会沟通",
    "设计迭代优化",
    "设计系统文档编写",
    "Sketch设计工具学习",
    "Adobe XD原型演示",
    "Framer动效实现",
    "SVG图标矢量绘制",
    "Logo设计商标注册",
    "海报设计版式",
    "书籍装帧设计",
    "包装结构设计",
    "电商详情页设计",
    "banner广告设计",
    "表情包设计",
    "IP形象设计",
    "游戏UI界面设计",
    "车载HMI设计",
    "智能手表界面设计",
    "AR界面设计",
    "VR界面设计",
    "语音界面VUI设计",
    "游戏化设计Gamification",
    "设计方法论学习",
    "双钻石设计模型",
    "设计思维Design Thinking",
    "同理心地图用户洞察",
    "用户旅程图Journey Map",
    "服务设计Service Design",
    "可持续设计Sustainability",
    "无障碍设计Accessibility",
    "包容性设计Inclusive Design",
    "情感化设计Emotional Design",
    "极简主义Minimalism",
    "赛博朋克风格Cyberpunk",
    "蒸汽波风格Vaporwave",
    "孟菲斯风格Memphis",
    "包豪斯Bauhaus",
    "装饰艺术Art Deco",
    "日本和风设计",
    "新中式风格",
    "北欧极简风",
    "孟加拉风格色彩",
    "草间弥生波点艺术",
    "蒙德里安几何艺术",
    "康定斯基抽象艺术",
    "蒙德里安红黄蓝",
    "葛饰北斋浮世绘",
    "设计系统Design System",
    "设计令牌Design Token",
    "组件库Component Library",
    "原子设计Atomic Design",
    "设计模式Design Patterns",
    "AI辅助设计Midjourney",
    "Stable Diffusion",
    "DALL-E图像生成",
    "Figma Dev Mode",
    "设计协作工具",
    "设计版本管理",
  ],
  // 人机交互类 690-764
  HCI: [
    "学习交互设计基础原理",
    "研究菲茨定律Fitts Law",
    "费茨定律点击目标大小",
    "希克定律选项数量",
    "操作法则7±2原则",
    "席克定律认知负荷",
    "特斯勒复杂度守恒",
    "雅各布定律用户习惯",
    "研究眼动追踪技术",
    "手势交互设计规范",
    "触摸交互设计原则",
    "语音交互VUI设计",
    "多模态交互设计",
    "无障碍设计Accessibility",
    "可用性测试方法",
    "用户访谈技巧",
    "用户研究问卷设计",
    "人物角色Persona",
    "用户体验旅程图",
    "信息架构IA设计",
    "导航设计层级结构",
    "搜索设计查询反馈",
    "分页vs无限滚动",
    "卡片设计规范",
    "手势设计动效",
    "下拉刷新交互",
    "加载状态设计",
    "空状态设计",
    "错误状态设计",
    "成功反馈设计",
    "确认对话框设计",
    "步骤指示器设计",
    "表单设计最佳实践",
    "输入框交互细节",
    "自动补全设计",
    "筛选排序设计",
    "标签导航设计",
    "底部导航设计",
    "抽屉菜单设计",
    "悬浮按钮FAB",
    "骨架屏Skeleton",
    "加载动画设计",
    "转场动画设计",
    "交互动效节奏",
    "微交互设计细节",
    "反馈设计即时性",
    "撤销重做设计",
    "快捷键设计",
    "手势缩放平移",
    "双指操作设计",
    "长按菜单设计",
    "拖放交互设计",
    "滑动操作设计",
    "日期选择器设计",
    "时间轴Timeline设计",
    "通知设计策略",
    "消息提示设计",
    "徽章Badge设计",
    "进度条设计",
    "滑块Slider设计",
    "开关Toggle设计",
    "单选多选设计",
    "下拉选择器设计",
    "级联选择设计",
    "树形控件设计",
    "表格交互设计",
    "列表设计规范",
    "瀑布流设计",
    "响应式断点设计",
    "移动端适配设计",
    "折叠屏交互设计",
    "平板横竖屏设计",
    "多窗口协作设计",
    "桌面端交互设计",
    "车载交互设计",
    "手表小屏交互",
    "VR手势交互",
    "AR虚实结合",
    "脑机接口BCI",
    "眼动交互设计",
    "手势识别Gesture Recognition",
    "语音交互Voice UI",
    "自然语言处理NLP",
    "情感计算Affective Computing",
    "多模态交互Multimodal",
    "空间计算Spatial Computing",
    "增强现实AR",
    "虚拟现实VR",
    "混合现实MR",
    "扩展现实XR",
    "可穿戴设备交互",
    "智能手表交互",
    "智能音箱交互",
    "智能眼镜交互",
    "智能家居交互",
    "车载HMI",
    "飞行器界面",
    "船载界面设计",
    "工业设备界面",
    "医疗设备界面",
    "ATM机界面优化",
    "自动售票机设计",
    "信息亭交互设计",
    "POS机界面",
    "ATM无障碍设计",
    "大型触摸屏交互",
    "投影交互设计",
    "触觉反馈Haptic",
    "声音设计Sound Design",
  ],
  HEALTH: [
    // 健康生活类 600-719
    "昨晚睡眠质量差，只睡了5小时",
    "今天跑步5公里，用时28分钟",
    "Keep训练30分钟，腹肌撕裂者",
    "体重降到70公斤了，减肥有效",
    "生物钟调整过来了，11点睡7点起",
    "今天喝了三杯咖啡，有点心慌",
    "家务拖地半小时，出汗了",
    "体检报告出来，胆固醇偏高",
    "冥想15分钟，内心平静",
    "昨晚失眠，凌晨3点才睡着",
    "打篮球1小时，输了但运动了",
    "饮食清淡一天，少油少盐",
    "瑜伽练习45分钟，柔韧性提升",
    "昨晚睡眠7小时，深度睡眠2小时",
    "跳绳1000个，暴汗",
    "体重反弹了2斤，要注意饮食",
    "今天喝够8杯水了",
    "感冒了，吃了感冒药",
    "骑自行车20公里",
    "冥想坚持30天，专注力提升",
    "睡眠监测显示翻身12次",
    "控制饮食，晚餐只吃蔬菜沙拉",
    "肩颈酸痛，做了拉伸缓解",
    "今天走了10000步",
    "午睡20分钟，下午有精神",
    "肠胃不适，吃了胃药",
    "跑步10公里挑战成功",
    "冥想时更容易进入状态",
    "体脂率降到18%了",
    "睡眠质量改善，一觉到天亮",
    "家务洗衣服也算运动",
    "去按摩店放松肩颈",
    "今天没喝咖啡，精神还可以",
    "游泳1000米",
    "冥想APP连续打卡50天",
    "控制糖分摄入，皮肤变好",
    "睡眠不足6小时，黑眼圈",
    "打羽毛球2小时",
    "轻断食16小时，感觉不错",
    "体重维持在68公斤",
    "冥想后写日记反思",
    "体检各项指标正常",
    "跑步配速提升到5分30秒",
    "家务大扫除累瘫了",
    "冥想APP推荐给父母",
    "今天只喝了一杯咖啡",
    "瑜伽进阶课程，挑战新动作",
    "睡眠质量时好时坏",
    "控制碳水摄入",
    "跳绳2000个",
    "冥想时呼吸控制更好",
    "体脂降到17%，腹肌可见",
    "睡眠规律，精神状态好",
    "骑共享单车上班",
    "冥想已成为习惯",
    "家务整理房间也算运动",
    "游泳学会自由泳",
    "睡眠深度增加",
    "冥想后焦虑减少",
    "体重65公斤达成",
    "跑步15公里长距离",
    "控制饮食初见成效",
    "冥想APP升级VIP",
    "肩颈疼痛缓解",
    "睡眠7.5小时达标",
    "瑜伽坚持3个月",
    "控制外卖次数",
    "跳绳连续1000不断",
    "冥想后情绪稳定",
    "体脂16%腹肌明显",
    "睡眠质量稳定",
    "游泳1500米",
    "家务做饭也算活动",
    "冥想APP分享给朋友",
    "跑步半马完赛",
    "控制奶茶摄入",
    "冥想后睡眠更好",
    "体检没有异常",
    "瑜伽教练说我进步很大",
    "体重维持65公斤",
    "睡眠8小时满足",
    "冥想带来内心平静",
  ],
  FINANCE: [
    // 财富经济类 720-839
    "工资到账23000元",
    "基金收益+3.5%，赚了2800元",
    "本月生活费支出6500元",
    "股票买入茅台100股",
    "理财到期，本息52000元",
    "报销单提交，等财务打款",
    "比特币卖出，获利15000元",
    "副业收入8000元，来自外包项目",
    "公积金查询余额28万",
    "房贷还款8500元",
    "保险续保年度缴费6000元",
    "旅行预算20000元已规划",
    "购物双十一花了5000元",
    "基金定投扣款2000元",
    "股票分红到账3000元",
    "年终奖发放80000元",
    "收到稿费收入2000元",
    "投资数字货币亏损5000元",
    "本月节约开支2000元",
    "理财产品收益稳定",
    "房租收入8500元",
    "兼职翻译收入3000元",
    "基金转换节省手续费",
    "股票账户浮亏20000元",
    "工资理财存入5000元",
    "收到红包2000元",
    "消费券省了500元",
    "记账APP分析消费结构",
    "基金加仓20000元",
    "信用卡还款8000元",
    "股票打新中签5000元",
    "公积金贷款审批通过",
    "保险理赔到账3000元",
    "副业项目尾款20000元",
    "股票清仓止盈15000元",
    "本月结余率35%",
    "基金定投坚持2年",
    "理财知识学习",
    "股票账户扭亏为盈",
    "年终奖理财规划",
    "收到兼职工资5000元",
    "基金转换调仓",
    "控制不必要的消费",
    "股票复盘总结",
    "公积金对账单",
    "保险到期续保",
    "投资组合调整",
    "记账习惯养成",
    "基金收益曲线",
    "股票操作纪律",
    "理财规划书",
    "信用卡积分兑换",
    "支出预算制定",
    "基金定期检视",
    "股票基本面分析",
    "储蓄目标达成",
    "基金波段操作",
    "股票长线持有",
    "理财复利计算",
    "收入多元化",
    "基金智能定投",
    "股票仓位管理",
    "消费降级实践",
    "基金优选组合",
    "股票止损纪律",
    "理财工具比较",
    "投资心态修炼",
    "基金定投技巧",
    "股票技术分析",
    "财务自由规划",
    "基金持仓检视",
    "股票分红再投资",
    "理财知识体系",
    "基金风险评估",
    "股票投资复盘",
    "财富积累记录",
    "基金净值增长",
    "股票账户收益",
    "理财目标达成",
    "基金投资总结",
    "股票操作回顾",
    "收入支出平衡",
    "基金表现分析",
    "股票市场回顾",
    "投资组合优化",
    "理财习惯培养",
    "基金定投坚持",
    "股票波段操作",
    "财富增长记录",
    "基金收益总结",
    "股票账户分析",
    "理财规划执行",
  ],
};

// ============================================
// 结晶内容模板
// ============================================
const DOCUMENT_TITLES = [
  "项目启动会议纪要", "技术方案评审", "周会汇报", "需求讨论会", "设计评审",
  "项目复盘报告", "技术分享总结", "客户沟通记录", "产品规划讨论", "代码review要点",
  "架构设计文档", "迭代计划会议", "里程碑总结", "Bug分析报告", "性能优化方案",
];

const PERSON_CARDS = [
  { name: "李教授", relationship: "大学导师", context: "学术指导", notes: "研究方向AI" },
  { name: "Joe", relationship: "前同事", context: "技术交流", notes: "现创业" },
  { name: "产品经理小林", relationship: "同事", context: "需求对接", notes: "合作默契" },
  { name: "设计师小王", relationship: "同事", context: "UI协作", notes: "审美很好" },
  { name: "技术总监老张", relationship: "上级", context: "技术指导", notes: "经验丰富" },
  { name: "测试负责人小李", relationship: "同事", context: "QA协作", notes: "严谨认真" },
  { name: "CTO王总", relationship: "领导", context: "战略决策", notes: "格局大" },
  { name: "客户张总", relationship: "客户", context: "项目汇报", notes: "要求高" },
  { name: "投资人刘总", relationship: "投资人", context: "融资沟通", notes: "看项目准" },
  { name: "合伙人老陈", relationship: "合伙人", context: "创业合作", notes: "资源丰富" },
  { name: "供应商老周", relationship: "供应商", context: "采购合作", notes: "价格合理" },
  { name: "法律顾问赵律师", relationship: "顾问", context: "法务咨询", notes: "专业负责" },
  { name: "会计小孙", relationship: "财务", context: "税务咨询", notes: "细心" },
  { name: "HR小吴", relationship: "人事", context: "招聘协作", notes: "效率高" },
  { name: "运维小郑", relationship: "同事", context: "运维协作", notes: "响应快" },
];

const TODO_TITLES = [
  "完成技术方案文档", "跟进需求变更", "代码重构优化", "写单元测试",
  "更新API文档", "参加技术评审", "修复线上Bug", "优化性能指标",
  "提交代码合并", "处理技术债务", "完成模块测试", "写项目复盘",
  "跟进客户反馈", "完成接口开发", "配置CI/CD", "部署新版本",
  "编写技术周报", "完成需求评审", "跟进开发进度", "处理生产问题",
];

export async function runSeed(): Promise<void> {
  const projectCount = await db.projects.count();
  if (projectCount > 0) {
    console.log("数据库已有数据，跳过种子生成");
    return;
  }

  console.log("开始生成种子数据...");

  // 1. 创建项目
  const projectIds: string[] = [];
  for (let i = 0; i < PROJECT_NAMES.length; i++) {
    const id = `project-${i + 1}`;
    projectIds.push(id);
    await db.projects.add({
      id,
      name: PROJECT_NAMES[i],
    created_at: Date.now() - (PROJECT_NAMES.length - i) * 86400000,
    metadata: {},
    });
  }

  // 2. 生成所有星尘数据
  const stardustList: StardustRecord[] = [];
  const entryProjects: { entry_type: "stardust" | "crystal"; entry_id: string; project_id: string }[] = [];

  // 遍历所有分类生成数据
  const categories = Object.entries(STARDUST_DATA) as [CategoryId, string[]][];
  
  let globalIndex = 0;
  for (const [category, contents] of categories) {
    for (const content of contents) {
      const created_at = randomDateMs(2);
      const id = `stardust-${String(globalIndex).padStart(4, "0")}`;
      
      stardustList.push({
        id,
        content,
        title: content.slice(0, 25),
        category,
        importance: 0.3 + Math.random() * 0.7,
        created_at,
        updated_at: created_at,
        source_type: Math.random() < 0.6 ? "recording" : "manual",
        metadata: {},
      });

      // 45% 概率关联到项目
      if (Math.random() < 0.45) {
        const project_id = pick(projectIds);
        entryProjects.push({ entry_type: "stardust", entry_id: id, project_id });
      }
      
      globalIndex++;
    }
  }

  // 批量写入星尘
  await seedStardust(stardustList);
  await seedEntryProjects(entryProjects);

  // 3. 生成结晶
  const docStardust = stardustList.filter(
    (s) => s.category === "WORK" || s.category === "LEARNING" || s.category === "DESIGN" || s.category === "HCI"
  );
  const personStardust = stardustList.filter(
    (s) => s.category === "RELATIONSHIPS"
  );
  const todoStardust = stardustList.filter(
    (s) => s.category === "WORK" || s.category === "HEALTH" || s.category === "FINANCE"
  );

  // 生成25个文档结晶
  for (let i = 0; i < 25; i++) {
    const sources = pickMany(docStardust, 4, 10);
    const sourceIds = sources.map((s) => s.id);
    const body = sources.map((s) => `• ${s.content}`).join("\n\n");
    const summary = sources[0].content.slice(0, 60) + "...";

    await createCrystal(
      "document",
      {
        title: `${pick(DOCUMENT_TITLES)} ${i + 1}`,
        body,
        summary,
      },
      sourceIds,
      {
        title: `文档 ${i + 1}`,
        category: "WORK",
        projectIds: Math.random() < 0.6 ? [pick(projectIds)] : undefined,
      }
    );
  }

  // 生成20个人物卡片
  for (let i = 0; i < 20; i++) {
    const person = PERSON_CARDS[i % PERSON_CARDS.length];
    const sources = pickMany(personStardust, 3, 6);
    const sourceIds = sources.map((s) => s.id);
    const notes = sources.map((s) => s.content).join("；").slice(0, 150);

    await createCrystal(
      "person_card",
      {
        name: person.name,
        relationship: person.relationship,
        context: person.context,
        notes,
      },
      sourceIds,
      {
        title: `${person.name}的卡片`,
        category: "RELATIONSHIPS",
        projectIds: Math.random() < 0.4 ? [pick(projectIds)] : undefined,
      }
    );
  }

  // 生成30个待办结晶
  for (let i = 0; i < 30; i++) {
    const sources = pickMany(todoStardust, 3, 6);
    const sourceIds = sources.map((s) => s.id);
    const due = new Date(Date.now() + (i % 30) * 86400000 * 2).toISOString().slice(0, 10);

    await createCrystal(
      "todo",
      {
        title: `${pick(TODO_TITLES)} ${i + 1}`,
        status: Math.random() < 0.3 ? "done" : "pending",
        due,
        priority: pick(["low", "medium", "high"]),
      },
      sourceIds,
      {
        title: `待办 ${i + 1}`,
        category: "WORK",
        projectIds: Math.random() < 0.5 ? [pick(projectIds)] : undefined,
      }
    );
  }

  console.log(`✅ 种子数据生成完成：`);
  console.log(`   - 星尘: ${stardustList.length} 条`);
  console.log(`   - 项目关联: ${entryProjects.length} 条`);
  console.log(`   - 结晶: 75 个（文档25 + 人物20 + 待办30）`);
}
